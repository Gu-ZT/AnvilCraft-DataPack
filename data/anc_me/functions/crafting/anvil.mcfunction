tag @s add amCrafting
execute as @e[type=item,limit=1,tag=!amCrafting,distance=..1] if score @s amRepairCost matches 26.. if predicate anc:random/1_5 run data modify entity @s Item.tag.Enchantments append from entity @e[type=item,limit=1,tag=amCrafting,nbt={Item:{id:"minecraft:enchanted_book"}},distance=..1] Item.tag.StoredEnchantments.[]
execute as @e[type=item,limit=1,tag=!amCrafting,distance=..1] if score @s amRepairCost matches 11..25 if predicate anc:random/1_3 run data modify entity @s Item.tag.Enchantments append from entity @e[type=item,limit=1,tag=amCrafting,nbt={Item:{id:"minecraft:enchanted_book"}},distance=..1] Item.tag.StoredEnchantments.[]
execute as @e[type=item,limit=1,tag=!amCrafting,distance=..1] if score @s amRepairCost matches 0..10 if predicate anc:random/1_2 run data modify entity @s Item.tag.Enchantments append from entity @e[type=item,limit=1,tag=amCrafting,nbt={Item:{id:"minecraft:enchanted_book"}},distance=..1] Item.tag.StoredEnchantments.[]
execute if entity @e[type=item,limit=1,tag=!amCrafting,distance=..1] run kill @s
kill @s